<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IB PYP Smart Planner</title>

<style>
body {
    font-family: "Segoe UI", sans-serif;
    margin: 0;
    background: #f3f5f7;
}

header {
    background: #2c3e50;
    color: white;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

header h1 {
    font-size: 18px;
}

button {
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.primary { background: #1abc9c; color: white; }
.secondary { background: #34495e; color: white; }

.container {
    display: flex;
}

.sidebar {
    width: 260px;
    background: #ffffff;
    padding: 15px;
    border-right: 1px solid #ddd;
}

.main {
    flex: 1;
    padding: 25px;
}

select, input, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 6px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

textarea {
    min-height: 80px;
}

.section {
    margin-bottom: 30px;
}

h3 {
    border-bottom: 1px solid #ddd;
    padding-bottom: 6px;
}

.unit-item {
    cursor: pointer;
    padding: 6px;
    margin: 4px 0;
    background: #f0f0f0;
    border-radius: 4px;
}

.unit-item:hover {
    background: #e0e0e0;
}
</style>
    body {
    background: #f7f9fc;
}

.section {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

textarea, input, select {
    font-size: 15px;
}

button {
    transition: 0.2s ease;
}

button:hover {
    transform: scale(1.02);
}

</head>

<body>

<header>
    <h1>ðŸ“˜ IB PYP Smart Planner</h1>
    <button class="primary" onclick="createUnit()">+ New Unit</button>
</header>

<div class="container">

<!-- SIDEBAR -->
<div class="sidebar">
    <h3>Your Units</h3>
    <div id="unitList"></div>
</div>

<!-- MAIN -->
<div class="main">

<div class="section">
<h3>Unit Overview</h3>

<label>Unit Title</label>
<input id="unitTitle">

<label>Transdisciplinary Theme</label>
<select id="theme"></select>

<label>Key Concepts</label>
<select id="keyConcepts" multiple size="6"></select>

<label>Central Idea</label>
<textarea id="central"></textarea>
</div>

<div class="section">
<h3>AI Suggestions</h3>
<button class="secondary" onclick="generateAISuggestions()">âœ¨ Generate Suggestions</button>

<label>Suggested Lines of Inquiry</label>
<textarea id="aiInquiry"></textarea>

<label>Suggested Learning Experiences</label>
<textarea id="aiLearning"></textarea>
</div>

<div class="section">
<h3>Reflection</h3>
<textarea id="reflection"></textarea>
</div>

<<button class="primary" onclick="saveUnit()">ðŸ’¾ Save / Update Unit</button>


</div>
</div>

<script>
// ---------------- DATA ----------------

const themes = [
    "Who we are",
    "Where we are in place and time",
    "How we express ourselves",
    "How the world works",
    "How we organize ourselves",
    "Sharing the planet"
];

const concepts = [
    "Form", "Function", "Causation", "Change",
    "Connection", "Perspective", "Responsibility", "Reflection"
];

let units = JSON.parse(localStorage.getItem("PYP_UNITS")) || [];
let currentUnitIndex = null;

// ---------------- INIT ----------------
function init() {
    const theme = document.getElementById("theme");
    const conceptsSelect = document.getElementById("keyConcepts");

    themes.forEach(t => theme.add(new Option(t, t)));
    concepts.forEach(c => conceptsSelect.add(new Option(c, c)));

    refreshUnitList();
}
window.onload = init;

// ---------------- UNIT HANDLING ----------------
function createUnit() {
    const name = prompt("Enter Unit Name:");
    if (!name) return;

    const unit = {
        name,
        data: {}
    };

    units.push(unit);
    currentUnitIndex = units.length - 1;
    saveAll();
    refreshUnitList();
    loadUnit();
}

function saveUnit() {
    
    // If no unit exists, create one automatically
    if (currentUnitIndex === null) {
        const defaultName = "New Unit";
        units.push({
            name: defaultName,
            data: {}
        });
        currentUnitIndex = units.length - 1;
        refreshUnitList();
    }

    const data = {
        unitTitle: unitTitle.value,
        theme: theme.value,
        keyConcepts: [...keyConcepts.selectedOptions].map(o => o.value),
        central: central.value,
        aiInquiry: aiInquiry.value,
        aiLearning: aiLearning.value,
        reflection: reflection.value
    };

    units[currentUnitIndex].data = data;
    saveAll();

    alert("âœ… Unit saved successfully!");
}

}

function loadUnit(index) {
    if (index !== undefined) currentUnitIndex = index;
    const data = units[currentUnitIndex].data || {};

    unitTitle.value = data.unitTitle || "";
    theme.value = data.theme || "";
    central.value = data.central || "";
    aiInquiry.value = data.aiInquiry || "";
    aiLearning.value = data.aiLearning || "";
    reflection.value = data.reflection || "";

    [...keyConcepts.options].forEach(o => {
        o.selected = data.keyConcepts?.includes(o.value);
    });
}

function refreshUnitList() {
    const list = document.getElementById("unitList");
    list.innerHTML = "";
    units.forEach((u, i) => {
        const div = document.createElement("div");
        div.className = "unit-item";
        div.textContent = u.name;
        div.onclick = () => loadUnit(i);
        list.appendChild(div);
    });
}

function saveAll() {
    localStorage.setItem("PYP_UNITS", JSON.stringify(units));
}

// ---------------- AI SIMULATION ----------------
function generateAISuggestions() {
    const theme = document.getElementById("theme").value;
    const concepts = [...document.getElementById("keyConcepts").selectedOptions].map(o => o.value);

    document.getElementById("aiInquiry").value =
        `â€¢ How does "${theme}" influence our daily lives?\n` +
        `â€¢ How do the concepts of ${concepts.join(", ")} shape understanding?\n` +
        `â€¢ What responsibilities do learners have?`;

    document.getElementById("aiLearning").value =
        `â€¢ Inquiry-based discussions\n` +
        `â€¢ Hands-on exploration\n` +
        `â€¢ Reflection journals\n` +
        `â€¢ Collaborative group work`;
}
</script>

</body>
</html>
